import sys
sys.path.append('/opt/lampp/htdocs/Scan/')    #添加搜索路径

from etc.获取开放端口 import ip_port_write
from etc.子域名和后台爆破 import url_back
from etc.url获取概况信息 import url_read_write

def start():
    with open('../opt/结果.txt','w') as f:     #清空之前结果，之后让前端判断是否有内容在输出
        f.write('')
    a = ip_port_write()
    b = url_back()
    c = url_read_write()
    if a and b and c:
        write()

def write():
    with open('../opt/IP开放端口.txt','r') as file:
        port = file.readlines()
    with open('../opt/IP.txt','r') as fil:
        ip = fil.readline()
    with open('../opt/子域名结果.txt','r') as fi:
        sub = fi.readlines()
    with open('../opt/结果.txt','w') as like:
        like.write('\n')
        like.write('IP\n')
        like.write(ip)
        like.write('\n')
        like.write('\n')
        like.write('开放端口\n')
        for po in port:
            like.write(po)
        like.write('\n')
        like.write('\n')
        like.write('子域名\n')
        for su in sub:
            like.write(su)

start()