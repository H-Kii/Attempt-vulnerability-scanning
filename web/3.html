<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="css/index.css">
</head>
<body background="img/41.jpeg">
    <div class="home">
        <div class="content">
            <div class="stars"></div>
            <img class="bgc" src="img/16.jpg" width="0%" alt="">
            <img class="icon" src="" alt="">
            <div class='ribbon'>
                <a href='1.html'><span>首页</span></a>
                <a href='2.html'><span>项目概述</span></a>
                <a href='3.html'><span>项目实践</span></a>
            </div>
        </div>
        
        <div class="introduce">
            <div class="introduce_item">
                <span class="introduce_item_title">
                <form method="post" action="update_txt.php" target="frameName">	
		        <label for="content">输入框：</label><br>
		        <textarea name="content" rows="5" cols="50" required placeholder="请输入网址列如:https://baidu.com"></textarea><br><br>
		        <input type="submit" value="保存" onclick="alert('保存成功')" style="background-color: #52acbe; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
	            </form>
                <iframe  width=0 height=0 frameborder=0 id="frameName" name="frameName"></iframe>

                <label for="content">显示结果框：</label><br>
	<textarea id="fileContent" rows="10" cols="50"></textarea><br>
	<button onclick="loadFile()" style="background-color: #52acbe; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">读取结果</button>
                    <br>
                        <div class="nav1">
                            <input type="button" value="全局扫描" onclick="exec1(1),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
                        </div>
                        <div class="nav1">
                            <input type="button" value="指纹信息采集" onclick="exec1(2),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
                        </div>
                        <div class="nav1">
                            <input type="button" value="CVE扫描" onclick="exec1(3),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
                        </div>
                        <div class="nav1">
                            <input type="button" value="XSS与SQL漏洞" onclick="exec1(4),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
                        </div>
                 </span>
            </div>
        </div>
    </div>
</body>
<script>     
    function loadFile() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("fileContent").value = this.responseText;
            }
        };
        xhttp.open("GET", "../opt/结果.txt", true);  //读取指定文件
        xhttp.send();
    }
    
    function exec1(num) {
    // alert('请稍等,正在执行')
    const xhr = new XMLHttpRequest();
    // 设置请求方式和请求地址
    xhr.open('POST', 'res.php', true);
    // 设置请求头
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    // 发送请求
    xhr.send('num=' + num);
    // 监听请求状态变化
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
        // 请求成功后的处理
        console.log(xhr.responseText);
        loadFile()
        }
      }
    }
</script>  
</html>
