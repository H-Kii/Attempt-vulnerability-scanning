<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="title" content="ScoopThemes">
<meta name="ROBOTS" content="">
<meta name="description" content="">
<meta name="abstract" content="">

<title>Home</title>

<!-- Bootstrap -->
<link href="assets/css/bootstrap.css" rel="stylesheet">
<link href="assets/css/font-awesome.css" rel="stylesheet">
<link href="assets/css/bootstrap-theme.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/animations.css">

<!-- siimple style -->
<link href="assets/css/style.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
</head>

<body>

<div class="cloud floating">
	<img src="assets/img/cloud.png" alt="Scoop Themes">
</div>

<div class="cloud pos1 fliped floating">
	<img src="assets/img/cloud.png" alt="Scoop Themes">
</div>

<div class="cloud pos2 floating">
	<img src="assets/img/cloud.png" alt="Scoop Themes">
</div>

<div class="cloud pos3 fliped floating">
	<img src="assets/img/cloud.png" alt="Scoop Themes">
</div>


<div id="wrapper">
	<div class="container">
		<div class="row">
			<div class="col-sm-12 col-md-12 col-lg-12">
				<img src="assets/img/logo.png" alt="Scoop Themes Logo">
				<br/>
				<br/>
				<h2 class="subtitle">漏扫工具</h2>
				<br/>
				<div class="introduce">
					<div class="introduce_item">
						<span class="introduce_item_title">
						<form method="post" action="update_txt.php" target="frameName">	
						<label for="content">输入框：</label><br>
						<input type="text" name="content" rows="2" cols="200" required placeholder="请输入网址列如:https://baidu.com" onkeydown="this.onkeyup();" onkeyup="this.size=(this.value.length>40?this.value.length:40);" size="40">
						<!-- <textarea name="content" rows="2" cols="100" required placeholder="请输入网址列如:https://baidu.com"></textarea> -->
						<br><br>
						<input type="submit" value="保存" onclick="alert('保存成功')" style="background-color: #52acbe; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
						</form>
						<iframe  width=0 height=0 frameborder=0 id="frameName" name="frameName"></iframe>
		
						<label for="content">显示结果框：</label><br>
			<textarea id="fileContent" rows="8" cols="100"></textarea>
			<!-- <input type="text" id="fileContent" rows="8" cols="100" onkeydown="this.onkeyup();" onkeyup="this.size=(this.value.length>40?this.value.length:40);" size="40"> -->
			<br>
			<button onclick="loadFile()" style="background-color: #52acbe; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">读取结果</button>
							<br>
								<div class="nav1">
									<input type="button" value="全局扫描" onclick="exec1(1),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
								<div class="nav1">
									<input type="button" value="指纹信息采集" onclick="exec1(2),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
								<div class="nav1">
									<input type="button" value="CVE扫描" onclick="exec1(3),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
								<div class="nav1">
									<input type="button" value="XSS与SQL漏洞" onclick="exec1(4),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
								<div class="nav1">
									<input type="button" value="存活IP扫描" onclick="exec1(5),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
								<div class="nav1">
									<input type="button" value="智能扫描" onclick="exec1(6),alert('正在执行,请稍候')" style="background-color: transparent;color: #fff;" />
								</div>
						 </span>
					</div>
				</div>
		 
				
				<br/>
			</div>
			
		</div>
		<div class="row">
			
		</div>
	</div>
</div>

<script>
	
$(document).ready( function () {
$('#wrapper').height($(document).height());
// I only have one form on the page but you can be more specific if need be.
var $form = $('form');

if ( $form.length > 0 ) {
	$('form input[type="submit"]').bind('click', function ( event ) {
		if ( event ) event.preventDefault();
		// validate_input() is a validation function I wrote, you'll have to substitute this with your own.
		if ( $form.validate() ) { register($form); }
	});
}
});

function appendResult(userText , className, iconClass){
var resultHTML = "<div class='stretchLeft result "+ className + "'>" + userText + " <span class='fa fa-" + iconClass + "'></span>" + "</div>";
$('body').append(resultHTML);
$('.result').delay(10000).fadeOut('1000');
}


function register($form) {
$.ajax({
	type: $form.attr('method'),
	url: $form.attr('action'),
	data: $form.serialize(),
	cache       : false,
	dataType    : 'json',
	contentType: "application/json; charset=utf-8",
	error       : function(err) { alert("Could not connect to the registration server. Please try again later."); },
	success     : function(data) {
		if (data.result != "success") {
			appendResult('Wrong Email Or You Are Already Registered, Try Again', 'error', 'exclamation');
		} else {
			// It worked, carry on...
			appendResult('Successful, Check Your Email For Confirmation ', 'success', 'check');
		}
	}
});
}
    function loadFile() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("fileContent").value = this.responseText;
            }
        };
        xhttp.open("GET", "../opt/结果.txt", true);
        xhttp.send();
    }
    
    function exec1(num) {
    // alert('请稍等,正在执行')
    const xhr = new XMLHttpRequest();
    // 设置请求方式和请求地址
    xhr.open('POST', 'res.php', true);
    // 设置请求头
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    // 发送请求
    xhr.send('num=' + num);
    // 监听请求状态变化
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
        // 请求成功后的处理
        console.log(xhr.responseText);
        loadFile()
        }
      }
    }
</script>

</body>
</html>